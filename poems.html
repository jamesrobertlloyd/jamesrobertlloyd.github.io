<!DOCTYPE html>
<meta charset="utf-8">
<style>
</style>
<body>

Creativity seed (an integer)

<div>
    <input type="button"
           value="New inspiration"
           onclick="randomSeed()" />
</div>

<div>
    <textarea id="seed_text_area">123</textarea>
</div>

Creativity factor (between 0 and 1)

<div>
    <textarea id="temp_text_area">0.7</textarea>
</div>

Starting text

<div>
    <textarea id="prime_text_area">
Roses are red,
Violets are blue,</textarea>
</div>

Length of text (an integer)

<div>
    <textarea id="length_text_area">500</textarea>
</div>

<div>
    <input type="button"
           value="New inspiration"
           onclick="randomSeed()" />
    <input type="button"
           value="New poem"
           onclick="poem()" />
</div>

<div>
    <textarea id="poem_text_area">Poem appears here!</textarea>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://cdn.rawgit.com/timheap/jquery-xmlrpc/master/jquery.xmlrpc.min.js"></script>

<script>

    function poem_error_message(jqXHR, status, error) {
        updatePoem("Communication with server failed : " + error);
    }

    function flashColor(selector) {
        d3.select(selector)
                .style("color", "black")
                .transition()
                .duration(250)
                .style("color", "red")
                .transition()
                .duration(250)
                .style("color", "black");
    }
    
    function randomSeed() {
        $("#seed_text_area").val(Math.floor((Math.random() * 1000000) + 1));
        flashColor("#seed_text_area");
    }

    function poem() {
        updatePoem('Contacting cloud poet')
        $.xmlrpc({
                  url: 'http://52.18.108.75:2345',
                  methodName: 'poem',
                  params: [$("#seed_text_area").val(),
                           $("#temp_text_area").val(),
                           $("#prime_text_area").val(),
                           $("#length_text_area").val()
                          ],
                  success: updatePoem,
                  error: poem_error_message
        });
    }

    function updatePoem(response, status, jqXHR) {
        $("#poem_text_area").val(response);
        flashColor("#poem_text_area");
    }

</script>

</body>

